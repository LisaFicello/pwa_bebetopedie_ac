<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Projet pour le cours de PWA - Développement d'une application Bêbétopédie d'Animal Crossing New Horizon">
    <meta name="author" content="">
    <title>Bebetopedia</title>

    <link rel="apple-touch-icon" sizes="180x180" href="apple/apple-icon-180.jpg">
    <link rel="apple-touch-icon" sizes="167x167" href="apple/apple-icon-167.jpg">
    <link rel="apple-touch-icon" sizes="152x152" href="apple/apple-icon-152.jpg">
    <link rel="apple-touch-icon" sizes="120x120" href="apple/apple-icon-120.jpg">

    <meta name="apple-mobile-web-app-capable" content="yes">

    <link href="splashscreens/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="splashscreens/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="splashscreens/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="splashscreens/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/ipadpro3_splash.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="splashscreens/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />

    <meta name="theme-color" content="#fec560"/>
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/icons/icomoon/styles.css" />
    <link rel="stylesheet" href="assets/css/icons/fontawesome/styles.min.css" />
    <link rel="stylesheet" href="assets/css/components.css" />
    <link rel="stylesheet" href="assets/css/core.css" />
    <link rel="stylesheet" href="assets/css/colors.css" />

    <link href="style.css" rel="stylesheet">
    <link href="creatures/css/sprite-fish.css" rel="stylesheet">
    <link href="creatures/css/sprite-insect.css" rel="stylesheet">
    <link href="creatures/css/sprite-marine.css" rel="stylesheet">
    <link href="creatures/css/sprite-event.css" rel="stylesheet">
  
  </head>
  
  <body>
    <script src="idb/database.js"></script>
    <script src="idb/idb.js"></script>
    <script type="text/javascript" src="creatures/data/fishData.js"></script>
    <script type="text/javascript" src="creatures/data/insectData.js"></script>
    <script type="text/javascript" src="creatures/data/marineData.js"></script>
    <script type="text/javascript" src="creatures/data/eventData.js"></script>
    <script src="creatures/creaturesAPI.js"></script>

    <!-- Integration Firebase -->

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="assets/js/firebase-app.js"></script>

    <script src="assets/js/firebase-auth.js"></script>

    <script src="assets/js/firebase-database.js"></script>

    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyDNPMUuxkzYOGsMmQVvzg1oFNKvegIFKco",
        authDomain: "bebetopedie.firebaseapp.com",
        databaseURL: "https://bebetopedie.firebaseio.com",
        projectId: "bebetopedie",
        storageBucket: "bebetopedie.appspot.com",
        messagingSenderId: "716668447382",
        appId: "1:716668447382:web:811c6d1cd1714c461130b7",
        measurementId: "G-FYXHYBFWSM"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>

    <script src="databaseAPI.js"></script>

    <div class="navbar navbar-inverse" id="navbar-main">

      <div class="navbar-header">

        <a class="navbar-brand" href="#">Bebetopedia</a>
  
        <ul class="nav navbar-nav pull-right visible-xs-block">
          <li><a data-toggle="collapse" data-target="#navbar-mobile"><i class="icon-paragraph-justify3"></i></a></li>
        </ul>

      </div>
  
      <div class="navbar-collapse collapse" id="navbar-mobile">

        <div id="login-zone">

        </div>


      </div>

    </div>

    <div class="page-container">

      <div class="page-content">  
  
        <div class="content-wrapper">
  
          <div class="row">

            <div class="col-sm-3 col-md-2">

              <div id="block-next-update" style="text-align: center;margin-bottom: 20px; display: none;">
                <span class="label label-info label-icon">
                  <i class="icon-loop3"></i>&nbsp;&nbsp;
                  Next update in
                  <span id="block-next-update-time"></span>&nbsp;
                  seconds
                </span>
              </div>        
  
            </div>

            <div class="col-sm-9 col-md-10" style="padding-right: 25px;">

              <div class="row">

                <div class="col-md-6 col-sm-4">
                  <div id="block-search" class="form-group form-group-xs has-feedback has-feedback-left visible-sm-block visible-md-block visible-lg-block">
                    <input type="text" class="form-control" placeholder="Search by name..." id="searchByName">
                    <div class="form-control-feedback">
                      <i class="icon-search4 text-size-base"></i>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 col-sm-8">
                  <div id="block-sort-desktop" class="form-group visible-sm-block visible-md-block visible-lg-block" style="text-align: right;">
                    <label class="control-label">Sort by : </label>
                    <label class="radio-inline">
                      <input type="radio" name="creatureSort" class="styled" checked="checked" value="name">
                      Name
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="creatureSort" class="styled" value="location">
                      Location
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="creatureSort" class="styled" value="price_desc">
                      Price desc
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="creatureSort" class="styled" value="price_asc">
                      Price asc
                    </label>
                  </div>                      
                </div>

              </div>

            </div>

            <div id="block-sort-mobile" style="display: none;">
              <div class="panel panel-flat">
                <form style="padding: 20px; padding-bottom: 0;">
                  <div class="form-group">
                    <label class="control-label">Sort by : </label>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureSort-mobile" class="styled" checked="checked" value="name">
                        Name
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureSort-mobile" class="styled" value="location">
                        Location
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureSort-mobile" class="styled" value="price_desc">
                        Price desc
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureSort-mobile" class="styled" value="price_asc">
                        Price asc
                      </label>
                    </div>                          
                  </div>
                </form>
              </div>
            </div>

            <div id="block-filter-desktop" class="col-md-2 col-sm-3 visible-sm-block visible-md-block visible-lg-block" style="padding-top: 15px;">          
              <div class="panel panel-flat">
                <form style="padding: 20px; padding-bottom: 0;">

                  <div class="form-group">
                    <label class="control-label">Type of creature :</label>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureTypeRadios" class="styled" checked="checked" value="all">
                        All
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureTypeRadios" class="styled" value="insects">
                        Insects
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureTypeRadios" class="styled" value="fishes">
                        Fishes
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="creatureTypeRadios" class="styled" value="marine">
                        Marine
                      </label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label">Hemisphere :</label>
                    <div class="radio">
                      <label>
                        <input type="radio" name="hemisphereRadios" class="styled" checked="checked" value="northern">
                        Northern
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="hemisphereRadios" class="styled" value="southern">
                        Southern
                      </label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label">Period :</label>
                    <div class="radio">
                      <label>
                        <input type="radio" name="periodRadios" class="styled" checked="checked" value="all">
                        All
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="periodRadios" class="styled" value="currently">
                        Currently
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="periodRadios" class="styled" value="month">
                        In the month
                      </label>
                    </div>
                    <div class="radio">
                      <label>
                        <input type="radio" name="periodRadios" class="styled" value="custom">
                        Custom
                      </label>
                    </div>
                    <div id="block-customPeriod" style="display: none;">
                      <div class="form-group form-group-xs" style="margin-bottom: 5px;">
                        <select name="selectMonth" data-placeholder="Month..." class="select-search">
                          <option></option>
                          <option value="1">January</option>
                          <option value="2">February</option>
                          <option value="3">March</option>
                          <option value="4">April</option>
                          <option value="5">May</option>
                          <option value="6">June</option>
                          <option value="7">July</option>
                          <option value="8">August</option>
                          <option value="9">September</option>
                          <option value="10">October</option>
                          <option value="11">November</option>
                          <option value="12">December</option>
                        </select>
                      </div>
                      <div class="form-group form-group-xs">
                        <select name="selectTime" data-placeholder="Time..." class="select-search">
                          <option></option>
                          <option value="0">00:00 AM</option>
                          <option value="1">01:00 AM</option>
                          <option value="2">02:00 AM</option>
                          <option value="3">03:00 AM</option>
                          <option value="4">04:00 AM</option>
                          <option value="5">05:00 AM</option>
                          <option value="6">06:00 AM</option>
                          <option value="7">07:00 AM</option>
                          <option value="8">08:00 AM</option>
                          <option value="9">09:00 AM</option>
                          <option value="10">10:00 AM</option>
                          <option value="11">11:00 AM</option>
                          <option value="12">00:00 PM</option>
                          <option value="13">01:00 PM</option>
                          <option value="14">02:00 PM</option>
                          <option value="15">03:00 PM</option>
                          <option value="16">04:00 PM</option>
                          <option value="17">05:00 PM</option>
                          <option value="18">06:00 PM</option>
                          <option value="19">07:00 PM</option>
                          <option value="20">08:00 PM</option>
                          <option value="21">09:00 PM</option>
                          <option value="22">10:00 PM</option>
                          <option value="23">11:00 PM</option>
                        </select>
                      </div>
                    </div>
                  </div>

                </form>
              </div>
            </div>
        
            <div id="block-filter-mobile" style="display: none;">
              <div class="panel panel-flat">
                <form style="padding: 20px; padding-bottom: 0;">
                        
                  <div class="form-group">
                    <label class="control-label">Type of creature :</label><br>
                    <div class="row">
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="creatureTypeRadios-mobile" class="styled" value="all">
                            All
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="creatureTypeRadios-mobile" class="styled" value="insects">
                            Insects
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="creatureTypeRadios-mobile" class="styled" value="fishes">
                            Fishes
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="creatureTypeRadios-mobile" class="styled" value="marine">
                            Marine
                          </label>
                        </div>  
                      </div>  
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label">Hemisphere :</label><br>
                    <div class="row">
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="hemisphereRadios-mobile" class="styled" value="northern">
                            Northern
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="hemisphereRadios-mobile" class="styled" value="southern">
                            Southern
                          </label>
                        </div>  
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label">Period :</label>
                    <div class="row">
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="periodRadios-mobile" class="styled" value="all">
                            All
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="periodRadios-mobile" class="styled" value="currently">
                            Currently
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="periodRadios-mobile" class="styled" value="month">
                            In the month
                          </label>
                        </div>  
                      </div>
                      <div class="col-xs-6">
                        <div class="radio">
                          <label>
                            <input type="radio" name="periodRadios-mobile" class="styled" value="custom">
                            Custom
                          </label>
                        </div>  
                      </div>
                    </div>

                    <div id="block-customPeriod-mobile" style="margin-top: 5px;display: none;">  
                      <div class="form-group form-group-xs" style="margin-bottom: 5px;">
                        <select name="selectMonth-mobile" data-placeholder="Month..." class="select-search">
                          <option></option>
                          <option value="1">January</option>
                          <option value="2">February</option>
                          <option value="3">March</option>
                          <option value="4">April</option>
                          <option value="5">May</option>
                          <option value="6">June</option>
                          <option value="7">July</option>
                          <option value="8">August</option>
                          <option value="9">September</option>
                          <option value="10">October</option>
                          <option value="11">November</option>
                          <option value="12">December</option>
                        </select>
                      </div>
                      <div class="form-group form-group-xs">
                        <select name="selectTime-mobile" data-placeholder="Time..." class="select-search">
                          <option></option>
                          <option value="0">00:00 AM</option>
                          <option value="1">01:00 AM</option>
                          <option value="2">02:00 AM</option>
                          <option value="3">03:00 AM</option>
                          <option value="4">04:00 AM</option>
                          <option value="5">05:00 AM</option>
                          <option value="6">06:00 AM</option>
                          <option value="7">07:00 AM</option>
                          <option value="8">08:00 AM</option>
                          <option value="9">09:00 AM</option>
                          <option value="10">10:00 AM</option>
                          <option value="11">11:00 AM</option>
                          <option value="12">00:00 PM</option>
                          <option value="13">01:00 PM</option>
                          <option value="14">02:00 PM</option>
                          <option value="15">03:00 PM</option>
                          <option value="16">04:00 PM</option>
                          <option value="17">05:00 PM</option>
                          <option value="18">06:00 PM</option>
                          <option value="19">07:00 PM</option>
                          <option value="20">08:00 PM</option>
                          <option value="21">09:00 PM</option>
                          <option value="22">10:00 PM</option>
                          <option value="23">11:00 PM</option>
                        </select>
                      </div>
                    </div>

                  </div>
   
                </form>
              </div>
            </div>
                
            <div id="block-creatures" class="col-md-10">
              <div id="events" class="row creatures-div"></div>
              <div id="insects" class="row creatures-div"></div>
              <div id="fishes" class="row creatures-div"></div>
              <div id="marine" class="row creatures-div"></div>
            </div>
  
          </div> 
    
        </div>
  
      </div>
  
    </div>
    <script src="event.js"></script>

    <ul class="fab-menu fab-menu-fixed fab-menu-bottom-right visible-xs-block" data-fab-toggle="click">
      <li>
        <a id="menu-mobile" class="fab-menu-btn btn bg-blue btn-float btn-rounded btn-icon">
          <i class="fab-icon-open icon-menu7"></i>
          <i class="fab-icon-close icon-cross2"></i>
        </a>

        <ul class="fab-menu-inner">
          <li>
            <a id="btn-show-panel-search" class="btn btn-default btn-rounded btn-icon btn-float">
              <i class="icon-search4"></i>
            </a>
          </li>
          <li>
            <a id="btn-show-panel-filter" class="btn btn-default btn-rounded btn-icon btn-float">
              <i class="icon-filter3"></i>
            </a>
          </li>
          <li>
            <a id="btn-show-panel-sort" class="btn btn-default btn-rounded btn-icon btn-float">
              <i class="icon-sort"></i>
            </a>
          </li>
        </ul>
      </li>
    </ul>
    
    <script src="main.js"></script>
    <script src="logout.js"></script>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/uniform.min.js"></script>

    <script>
      var time = new Date().getTime();
      function showCurrentCreatures(animalSelected,hemisphereSelected){
            console.log(' NEW Currently period');
            var currentDate = new Date();
            var currentHours = currentDate.getHours();
            var currentMonth = currentDate.getMonth() + 1;
            $("#" + animalSelected + " .caption").each(function(index, elem){
                var hours = $(this).find("span[data-times-array]").attr("data-times-array").split(',');
                var months = $(this).find("span[data-months-" + hemisphereSelected + "-array]").attr("data-months-" + hemisphereSelected + "-array").split(',');
                if(hours.indexOf(currentHours.toString()) != -1 && months.indexOf(currentMonth.toString()) != -1){
                  $(this).parent().parent().show();
                }
              });
      }

      $(".styled").uniform({
        radioClass: 'choice'
      });
      $("[name='animalRadios']").on('change',function(){
        $(".animals-div").hide();
        $("#" + $(this).val()).show();
      });
      $("[name='hemisphereRadios']").on('change',function(){
        var animalSelected = $("[name='animalRadios']:checked").val();
        var value = $(this).val();
        $("#" + animalSelected + " .caption").each(function(index, elem){
          var period = $(this).find("span[data-months-" + value + "-text]").attr("data-months-" + value + "-text").split(',');
          $(this).find('.period-text').text(period);
        });
      });
      $("[name='periodRadios']").on("change", function(){
        var animalSelected = $("[name='animalRadios']:checked").val();
        var hemisphereSelected = $("[name='hemisphereRadios']:checked").val();
        $("#" + animalSelected).children().hide();
        if($(this).val()=='all'){
          console.log('All period');
          $("#" + animalSelected).children().show();
        }
        else if ($(this).val()=='currently'){
          console.log('Currently period');
          showCurrentCreatures(animalSelected,hemisphereSelected);
          setInterval(function(){showCurrentCreatures(animalSelected,hemisphereSelected)}, 60000);
        }
        else if ($(this).val()=='month'){
          console.log('In month period');
            var currentDate = new Date();
            var currentMonth = currentDate.getMonth() + 1;
            $("#" + animalSelected + " .caption").each(function(index, elem){
              var months = $(this).find("span[data-months-" + hemisphereSelected + "-array]").attr("data-months-" + hemisphereSelected + "-array").split(',');
              if(months.indexOf(currentMonth.toString()) != -1){
                $(this).parent().parent().show();
              }
            });
        }
      });
      $("#searchByName").on("keyup", function(){
        var animalSelected = $("[name='animalRadios']:checked").val();
        var value = $(this).val();
        $("#" + animalSelected + " .animals-name").each(function(index, elem){
          if($(this).text().toUpperCase().includes(value.toUpperCase())){
            $(this).parent().parent().parent().show()
          }else{
            $(this).parent().parent().parent().hide()
          }
        });
      });
    </script>
    <script src="assets/js/select2.min.js"></script>
    <script type="text/javascript" src="assets/js/fab.min.js"></script>

    <script src="functions.js"></script>

  </body>
</html>